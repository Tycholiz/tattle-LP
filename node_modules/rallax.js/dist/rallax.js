!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.rallax=e()}(this,function(){"use strict";var t=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),n=!1,o=[],r=.3,s=!1,a=function(){function o(t,e){var i=e.speed,n=e.mobilePx;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.speed=i||r,this.mobilePx=n||s,this.mobileDisable=!1,this.conditions=[],this.active=!0,"string"==typeof(this.target=t)&&(this.target=document.querySelector(""+t)),this.winHeight=window.innerHeight,this.accumulated=0,this.getRect(),this.startScroll=0<this.targetR.top-this.winHeight?this.targetR.top-this.winHeight:0}return t(o,[{key:"stop",value:function(){this.active=!1}},{key:"start",value:function(){this.active=!0}},{key:"getSpeed",value:function(){return this.speed}},{key:"changeSpeed",value:function(t){this.inWindow()&&t!==this.speed&&(this.accumulated=this.getTranslation(),this.startScroll=this.scrollY()),this.speed=t}},{key:"when",value:function(t,e){return this.conditions.push({condition:t,action:e}),this}},{key:"scrollY",value:function(){return window.scrollY||window.pageYOffset}},{key:"getTranslation",value:function(){var t=(this.scrollY()-this.startScroll)*this.speed+this.accumulated;return 0<=t?t:0}},{key:"getRect",value:function(){return this.targetR=this.target.getBoundingClientRect(),this.targetR}},{key:"inWindow",value:function(){this.getRect();var t=this.targetR.top,e=this.targetR.bottom;return t<this.winHeight&&0<e}},{key:"move",value:function(){this.target.style.transform="translateY("+this.getTranslation()+"px)"}}]),o}(),c=function(t){requestAnimationFrame(function(){t.forEach(function(t){t.mobileDisable||(t.conditions.forEach(function(t){var e=t.condition,i=t.action;e()&&i()}),t.active&&t.move())})})},u=function(){var e=window.innerWidth;o.forEach(function(t){t.mobilePx>=e&&(t.mobileDisable=!0)})};return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new a(t,e);return o.push(i),u(),n||(window.addEventListener("scroll",function(t){c(o)}),window.addEventListener("resize",function(t){u()}),n=!0),i}});
